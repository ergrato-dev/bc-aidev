<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <marker id="arrowMon" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#60a5fa"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="550" fill="#0f172a"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="24" font-weight="bold">Stack de Monitoreo ML</text>
  
  <!-- ML API Service -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="200" height="180" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">ML API Service</text>
    
    <!-- Endpoints -->
    <rect x="15" y="50" width="170" height="30" rx="4" fill="#0f172a" stroke="#10b981" stroke-width="1"/>
    <text x="100" y="70" text-anchor="middle" fill="#34d399" font-family="system-ui, sans-serif" font-size="10">/predict - Predicciones</text>
    
    <rect x="15" y="90" width="170" height="30" rx="4" fill="#0f172a" stroke="#f59e0b" stroke-width="1"/>
    <text x="100" y="110" text-anchor="middle" fill="#fbbf24" font-family="system-ui, sans-serif" font-size="10">/health - Health Check</text>
    
    <rect x="15" y="130" width="170" height="30" rx="4" fill="#0f172a" stroke="#ef4444" stroke-width="1"/>
    <text x="100" y="150" text-anchor="middle" fill="#f87171" font-family="system-ui, sans-serif" font-size="10">/metrics - Prometheus</text>
  </g>
  
  <!-- Arrow API -> Prometheus -->
  <g transform="translate(250, 170)">
    <line x1="0" y1="0" x2="80" y2="0" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrowMon)"/>
    <text x="40" y="-8" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="9">scrape</text>
  </g>
  
  <!-- Prometheus -->
  <g transform="translate(330, 80)">
    <rect x="0" y="0" width="200" height="180" rx="12" fill="#1e293b" stroke="#ef4444" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" fill="#f87171" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Prometheus</text>
    <text x="100" y="50" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">:9090</text>
    
    <!-- Features -->
    <rect x="15" y="65" width="170" height="25" rx="4" fill="#0f172a"/>
    <text x="100" y="82" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Time-Series Database</text>
    
    <rect x="15" y="95" width="170" height="25" rx="4" fill="#0f172a"/>
    <text x="100" y="112" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">PromQL Queries</text>
    
    <rect x="15" y="125" width="170" height="25" rx="4" fill="#0f172a"/>
    <text x="100" y="142" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Alert Rules</text>
    
    <rect x="15" y="155" width="170" height="20" rx="4" fill="#0f172a"/>
    <text x="100" y="169" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="8">15s scrape interval</text>
  </g>
  
  <!-- Arrow Prometheus -> Grafana -->
  <g transform="translate(530, 170)">
    <line x1="0" y1="0" x2="80" y2="0" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrowMon)"/>
    <text x="40" y="-8" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="9">query</text>
  </g>
  
  <!-- Grafana -->
  <g transform="translate(610, 80)">
    <rect x="0" y="0" width="230" height="180" rx="12" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="115" y="30" text-anchor="middle" fill="#fbbf24" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Grafana</text>
    <text x="115" y="50" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">:3000</text>
    
    <!-- Dashboard panels simulation -->
    <g transform="translate(15, 65)">
      <rect x="0" y="0" width="95" height="50" rx="4" fill="#0f172a" stroke="#10b981" stroke-width="1"/>
      <text x="47" y="20" text-anchor="middle" fill="#34d399" font-family="system-ui, sans-serif" font-size="9">RPS</text>
      <text x="47" y="38" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">1,234</text>
    </g>
    
    <g transform="translate(120, 65)">
      <rect x="0" y="0" width="95" height="50" rx="4" fill="#0f172a" stroke="#3b82f6" stroke-width="1"/>
      <text x="47" y="20" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="9">Latency P95</text>
      <text x="47" y="38" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">45ms</text>
    </g>
    
    <g transform="translate(15, 125)">
      <rect x="0" y="0" width="95" height="50" rx="4" fill="#0f172a" stroke="#ef4444" stroke-width="1"/>
      <text x="47" y="20" text-anchor="middle" fill="#f87171" font-family="system-ui, sans-serif" font-size="9">Error Rate</text>
      <text x="47" y="38" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">0.1%</text>
    </g>
    
    <g transform="translate(120, 125)">
      <rect x="0" y="0" width="95" height="50" rx="4" fill="#0f172a" stroke="#a78bfa" stroke-width="1"/>
      <text x="47" y="20" text-anchor="middle" fill="#a78bfa" font-family="system-ui, sans-serif" font-size="9">Confidence</text>
      <text x="47" y="38" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">0.92</text>
    </g>
  </g>
  
  <!-- Alertmanager -->
  <g transform="translate(330, 290)">
    <rect x="0" y="0" width="200" height="100" rx="12" fill="#1e293b" stroke="#a78bfa" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" fill="#a78bfa" font-family="system-ui, sans-serif" font-size="14" font-weight="bold">Alertmanager</text>
    
    <rect x="15" y="50" width="170" height="40" rx="4" fill="#0f172a"/>
    <text x="100" y="68" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Slack, Email, PagerDuty</text>
    <text x="100" y="82" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">Alert routing &amp; grouping</text>
  </g>
  
  <!-- Arrow Prometheus -> Alertmanager -->
  <g transform="translate(430, 260)">
    <line x1="0" y1="0" x2="0" y2="28" stroke="#60a5fa" stroke-width="2" marker-end="url(#arrowMon)"/>
    <text x="15" y="15" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="9">alerts</text>
  </g>
  
  <!-- Metrics Types Box -->
  <g transform="translate(50, 290)">
    <rect x="0" y="0" width="250" height="150" rx="12" fill="#1e293b" stroke="#22d3ee" stroke-width="2"/>
    <text x="125" y="25" text-anchor="middle" fill="#22d3ee" font-family="system-ui, sans-serif" font-size="13" font-weight="bold">Tipos de Métricas</text>
    
    <text x="20" y="50" fill="#f87171" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">Counter</text>
    <text x="20" y="65" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">requests_total, errors_total</text>
    
    <text x="20" y="85" fill="#fbbf24" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">Gauge</text>
    <text x="20" y="100" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">active_requests, memory_usage</text>
    
    <text x="20" y="120" fill="#34d399" font-family="system-ui, sans-serif" font-size="11" font-weight="bold">Histogram</text>
    <text x="20" y="135" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="9">request_duration, confidence</text>
  </g>
  
  <!-- ML Specific Metrics -->
  <g transform="translate(560, 290)">
    <rect x="0" y="0" width="280" height="150" rx="12" fill="#1e293b" stroke="#ec4899" stroke-width="2"/>
    <text x="140" y="25" text-anchor="middle" fill="#f472b6" font-family="system-ui, sans-serif" font-size="13" font-weight="bold">Métricas Específicas ML</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="120" height="45" rx="4" fill="#0f172a"/>
      <text x="60" y="18" text-anchor="middle" fill="#60a5fa" font-family="system-ui, sans-serif" font-size="9">Inference Time</text>
      <text x="60" y="35" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="8">P50, P95, P99</text>
    </g>
    
    <g transform="translate(145, 40)">
      <rect x="0" y="0" width="120" height="45" rx="4" fill="#0f172a"/>
      <text x="60" y="18" text-anchor="middle" fill="#a78bfa" font-family="system-ui, sans-serif" font-size="9">Predictions</text>
      <text x="60" y="35" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="8">by class count</text>
    </g>
    
    <g transform="translate(15, 95)">
      <rect x="0" y="0" width="120" height="45" rx="4" fill="#0f172a"/>
      <text x="60" y="18" text-anchor="middle" fill="#f59e0b" font-family="system-ui, sans-serif" font-size="9">Confidence</text>
      <text x="60" y="35" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="8">distribution</text>
    </g>
    
    <g transform="translate(145, 95)">
      <rect x="0" y="0" width="120" height="45" rx="4" fill="#0f172a"/>
      <text x="60" y="18" text-anchor="middle" fill="#ef4444" font-family="system-ui, sans-serif" font-size="9">Data Drift</text>
      <text x="60" y="35" text-anchor="middle" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="8">KS statistic</text>
    </g>
  </g>
  
  <!-- Bottom Legend -->
  <g transform="translate(50, 470)">
    <rect x="0" y="0" width="800" height="60" rx="8" fill="#1e293b"/>
    <text x="400" y="20" text-anchor="middle" fill="#f8fafc" font-family="system-ui, sans-serif" font-size="12" font-weight="bold">Flujo de Datos de Monitoreo</text>
    
    <circle cx="80" cy="42" r="8" fill="#3b82f6"/>
    <text x="100" y="46" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">1. API expone /metrics</text>
    
    <circle cx="280" cy="42" r="8" fill="#ef4444"/>
    <text x="300" y="46" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">2. Prometheus scrape</text>
    
    <circle cx="480" cy="42" r="8" fill="#f59e0b"/>
    <text x="500" y="46" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">3. Grafana visualiza</text>
    
    <circle cx="680" cy="42" r="8" fill="#a78bfa"/>
    <text x="700" y="46" fill="#94a3b8" font-family="system-ui, sans-serif" font-size="10">4. Alertas</text>
  </g>
</svg>