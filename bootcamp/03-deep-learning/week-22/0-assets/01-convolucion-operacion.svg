<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="convGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8B5CF6;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="400" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="system-ui, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">Operación de Convolución 2D</text>
  
  <!-- Input Image -->
  <text x="100" y="70" font-family="system-ui, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">Imagen (5×5)</text>
  
  <!-- Input grid -->
  <g transform="translate(30, 85)">
    <!-- Grid cells -->
    <rect x="0" y="0" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="28" y="0" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="56" y="0" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="84" y="0" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="112" y="0" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    
    <rect x="0" y="28" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="28" y="28" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="56" y="28" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="84" y="28" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="112" y="28" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    
    <rect x="0" y="56" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="28" y="56" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="56" y="56" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="84" y="56" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="112" y="56" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    
    <rect x="0" y="84" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="28" y="84" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="56" y="84" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="84" y="84" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="112" y="84" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    
    <rect x="0" y="112" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="28" y="112" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="56" y="112" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="84" y="112" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    <rect x="112" y="112" width="28" height="28" fill="#374151" stroke="#4B5563" stroke-width="1"/>
    
    <!-- Highlighted region (3x3) -->
    <rect x="0" y="0" width="84" height="84" fill="none" stroke="#3B82F6" stroke-width="3" rx="2"/>
    
    <!-- Values -->
    <text x="14" y="20" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">1</text>
    <text x="42" y="20" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">2</text>
    <text x="70" y="20" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">3</text>
    <text x="98" y="20" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">4</text>
    <text x="126" y="20" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">5</text>
    
    <text x="14" y="48" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">4</text>
    <text x="42" y="48" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">5</text>
    <text x="70" y="48" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">6</text>
    <text x="98" y="48" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">7</text>
    <text x="126" y="48" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">8</text>
    
    <text x="14" y="76" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">7</text>
    <text x="42" y="76" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">8</text>
    <text x="70" y="76" font-family="monospace" font-size="12" fill="#60a5fa" text-anchor="middle">9</text>
    <text x="98" y="76" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">0</text>
    <text x="126" y="76" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">1</text>
    
    <text x="14" y="104" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">2</text>
    <text x="42" y="104" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">3</text>
    <text x="70" y="104" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">4</text>
    <text x="98" y="104" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">5</text>
    <text x="126" y="104" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">6</text>
    
    <text x="14" y="132" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">3</text>
    <text x="42" y="132" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">4</text>
    <text x="70" y="132" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">5</text>
    <text x="98" y="132" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">6</text>
    <text x="126" y="132" font-family="monospace" font-size="12" fill="#94a3b8" text-anchor="middle">7</text>
  </g>
  
  <!-- Multiply symbol -->
  <text x="210" y="160" font-family="system-ui, sans-serif" font-size="28" fill="#f59e0b" text-anchor="middle">×</text>
  
  <!-- Kernel -->
  <text x="310" y="70" font-family="system-ui, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">Kernel (3×3)</text>
  
  <g transform="translate(240, 95)">
    <rect x="0" y="0" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="40" y="0" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="80" y="0" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    
    <rect x="0" y="40" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="40" y="40" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="80" y="40" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    
    <rect x="0" y="80" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="40" y="80" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    <rect x="80" y="80" width="40" height="40" fill="#7c3aed" stroke="#8B5CF6" stroke-width="2" rx="4"/>
    
    <!-- Kernel values -->
    <text x="20" y="26" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
    <text x="60" y="26" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">0</text>
    <text x="100" y="26" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">-1</text>
    
    <text x="20" y="66" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
    <text x="60" y="66" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">0</text>
    <text x="100" y="66" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">-1</text>
    
    <text x="20" y="106" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
    <text x="60" y="106" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">0</text>
    <text x="100" y="106" font-family="monospace" font-size="14" fill="#ffffff" text-anchor="middle">-1</text>
  </g>
  
  <!-- Equals symbol -->
  <text x="400" y="160" font-family="system-ui, sans-serif" font-size="28" fill="#f59e0b" text-anchor="middle">=</text>
  
  <!-- Output -->
  <text x="520" y="70" font-family="system-ui, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">Feature Map (3×3)</text>
  
  <g transform="translate(450, 105)">
    <rect x="0" y="0" width="45" height="45" fill="#10b981" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="45" y="0" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="90" y="0" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    
    <rect x="0" y="45" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="45" y="45" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="90" y="45" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    
    <rect x="0" y="90" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="45" y="90" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    <rect x="90" y="90" width="45" height="45" fill="#059669" stroke="#34d399" stroke-width="2" rx="4"/>
    
    <!-- Output values -->
    <text x="22" y="29" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="67" y="29" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="112" y="29" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    
    <text x="22" y="74" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="67" y="74" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="112" y="74" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    
    <text x="22" y="119" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="67" y="119" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
    <text x="112" y="119" font-family="monospace" font-size="13" fill="#ffffff" text-anchor="middle">-6</text>
  </g>
  
  <!-- Calculation detail -->
  <rect x="620" y="80" width="260" height="175" fill="#1e293b" stroke="#334155" stroke-width="1" rx="8"/>
  <text x="750" y="105" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#f59e0b" text-anchor="middle">Cálculo posición (0,0)</text>
  
  <text x="640" y="135" font-family="monospace" font-size="11" fill="#60a5fa">1×1 + 2×0 + 3×(-1) +</text>
  <text x="640" y="155" font-family="monospace" font-size="11" fill="#60a5fa">4×1 + 5×0 + 6×(-1) +</text>
  <text x="640" y="175" font-family="monospace" font-size="11" fill="#60a5fa">7×1 + 8×0 + 9×(-1)</text>
  
  <line x1="640" y1="185" x2="850" y2="185" stroke="#475569" stroke-width="1"/>
  
  <text x="640" y="205" font-family="monospace" font-size="11" fill="#94a3b8">= 1 + 0 - 3 + 4 + 0 - 6</text>
  <text x="640" y="225" font-family="monospace" font-size="11" fill="#94a3b8">  + 7 + 0 - 9</text>
  <text x="640" y="245" font-family="monospace" font-size="11" fill="#10b981">= -6</text>
  
  <!-- Formula -->
  <rect x="30" y="290" width="840" height="90" fill="#1e293b" stroke="#334155" stroke-width="1" rx="8"/>
  
  <text x="450" y="320" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">Fórmula de Tamaño de Salida</text>
  
  <text x="450" y="355" font-family="monospace" font-size="16" fill="#f59e0b" text-anchor="middle">Output = (Input - Kernel + 2×Padding) / Stride + 1</text>
  
  <text x="220" y="365" font-family="monospace" font-size="11" fill="#94a3b8" text-anchor="middle"></text>
  <text x="450" y="368" font-family="monospace" font-size="11" fill="#60a5fa" text-anchor="middle">Ejemplo: (5 - 3 + 0) / 1 + 1 = 3</text>
</svg>
