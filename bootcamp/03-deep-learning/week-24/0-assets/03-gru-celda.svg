<svg viewBox="0 0 600 380" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#a6e3a1"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="600" height="380" fill="#1e1e2e"/>
  
  <!-- Title -->
  <text x="300" y="30" text-anchor="middle" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="18" font-weight="bold">Celda GRU</text>
  
  <!-- Main hidden state line -->
  <line x1="50" y1="180" x2="550" y2="180" stroke="#a6e3a1" stroke-width="3" stroke-dasharray="5,5" opacity="0.3"/>
  
  <!-- Reset gate -->
  <rect x="100" y="100" width="70" height="40" rx="6" fill="#313244" stroke="#f38ba8" stroke-width="2"/>
  <text x="135" y="125" text-anchor="middle" fill="#f38ba8" font-family="Inter, sans-serif" font-size="14" font-weight="bold">σ</text>
  <text x="135" y="155" text-anchor="middle" fill="#f38ba8" font-family="Inter, sans-serif" font-size="10">reset (r)</text>
  
  <!-- Update gate -->
  <rect x="100" y="220" width="70" height="40" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="2"/>
  <text x="135" y="245" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="14" font-weight="bold">σ</text>
  <text x="135" y="275" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="10">update (z)</text>
  
  <!-- Multiply for reset -->
  <circle cx="220" cy="120" r="12" fill="#313244" stroke="#f38ba8" stroke-width="2"/>
  <text x="220" y="125" text-anchor="middle" fill="#f38ba8" font-family="Inter, sans-serif" font-size="16">×</text>
  <line x1="170" y1="120" x2="208" y2="120" stroke="#f38ba8" stroke-width="2"/>
  
  <!-- Candidate h_tilde -->
  <rect x="270" y="100" width="70" height="40" rx="6" fill="#313244" stroke="#a6e3a1" stroke-width="2"/>
  <text x="305" y="125" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="14" font-weight="bold">tanh</text>
  <text x="305" y="155" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="10">h̃ₜ</text>
  <line x1="232" y1="120" x2="270" y2="120" stroke="#f38ba8" stroke-width="2"/>
  
  <!-- 1-z operation -->
  <rect x="200" y="220" width="50" height="40" rx="6" fill="#313244" stroke="#89b4fa" stroke-width="2"/>
  <text x="225" y="245" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="12" font-weight="bold">1-z</text>
  <line x1="170" y1="240" x2="200" y2="240" stroke="#89b4fa" stroke-width="2"/>
  
  <!-- Multiply z * h_tilde -->
  <circle cx="390" cy="120" r="12" fill="#313244" stroke="#a6e3a1" stroke-width="2"/>
  <text x="390" y="125" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="16">×</text>
  <line x1="340" y1="120" x2="378" y2="120" stroke="#a6e3a1" stroke-width="2"/>
  
  <!-- z connection to multiply -->
  <line x1="135" y1="220" x2="135" y2="200" stroke="#89b4fa" stroke-width="2"/>
  <line x1="135" y1="200" x2="390" y2="200" stroke="#89b4fa" stroke-width="2"/>
  <line x1="390" y1="200" x2="390" y2="132" stroke="#89b4fa" stroke-width="2"/>
  
  <!-- Multiply (1-z) * h_{t-1} -->
  <circle cx="390" cy="240" r="12" fill="#313244" stroke="#89b4fa" stroke-width="2"/>
  <text x="390" y="245" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="16">×</text>
  <line x1="250" y1="240" x2="378" y2="240" stroke="#89b4fa" stroke-width="2"/>
  
  <!-- Add final -->
  <circle cx="470" cy="180" r="14" fill="#313244" stroke="#f9e2af" stroke-width="2"/>
  <text x="470" y="185" text-anchor="middle" fill="#f9e2af" font-family="Inter, sans-serif" font-size="18">+</text>
  <line x1="390" y1="132" x2="390" y2="165" stroke="#a6e3a1" stroke-width="2"/>
  <line x1="390" y1="165" x2="456" y2="175" stroke="#a6e3a1" stroke-width="2"/>
  <line x1="390" y1="228" x2="390" y2="195" stroke="#89b4fa" stroke-width="2"/>
  <line x1="390" y1="195" x2="456" y2="185" stroke="#89b4fa" stroke-width="2"/>
  
  <!-- Output h_t -->
  <line x1="484" y1="180" x2="550" y2="180" stroke="#a6e3a1" stroke-width="3" marker-end="url(#arrow3)"/>
  <text x="530" y="170" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="12" font-weight="bold">hₜ</text>
  
  <!-- Input h_{t-1} -->
  <line x1="50" y1="180" x2="80" y2="180" stroke="#a6e3a1" stroke-width="3"/>
  <text x="65" y="170" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="12" font-weight="bold">hₜ₋₁</text>
  
  <!-- h_{t-1} branches -->
  <line x1="80" y1="180" x2="80" y2="120" stroke="#a6e3a1" stroke-width="2"/>
  <line x1="80" y1="120" x2="100" y2="120" stroke="#a6e3a1" stroke-width="2"/>
  <line x1="80" y1="180" x2="80" y2="240" stroke="#a6e3a1" stroke-width="2"/>
  <line x1="80" y1="240" x2="100" y2="240" stroke="#a6e3a1" stroke-width="2"/>
  
  <!-- h_{t-1} to reset multiply -->
  <line x1="80" y1="120" x2="80" y2="90" stroke="#a6e3a1" stroke-width="1.5"/>
  <line x1="80" y1="90" x2="220" y2="90" stroke="#a6e3a1" stroke-width="1.5"/>
  <line x1="220" y1="90" x2="220" y2="108" stroke="#a6e3a1" stroke-width="1.5"/>
  
  <!-- h_{t-1} to (1-z) multiply -->
  <line x1="80" y1="240" x2="80" y2="290" stroke="#a6e3a1" stroke-width="1.5"/>
  <line x1="80" y1="290" x2="390" y2="290" stroke="#a6e3a1" stroke-width="1.5"/>
  <line x1="390" y1="290" x2="390" y2="252" stroke="#a6e3a1" stroke-width="1.5"/>
  
  <!-- Input x_t -->
  <line x1="50" y1="320" x2="80" y2="320" stroke="#89b4fa" stroke-width="2"/>
  <text x="65" y="340" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="12" font-weight="bold">xₜ</text>
  
  <!-- x_t branches -->
  <line x1="80" y1="320" x2="120" y2="320" stroke="#89b4fa" stroke-width="2"/>
  <line x1="120" y1="320" x2="120" y2="260" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="150" y1="320" x2="150" y2="260" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="120" y1="320" x2="150" y2="320" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="120" y1="140" x2="120" y2="130" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="150" y1="140" x2="150" y2="130" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="120" y1="130" x2="305" y2="130" stroke="#89b4fa" stroke-width="1.5" opacity="0.5"/>
  <line x1="305" y1="140" x2="305" y2="130" stroke="#89b4fa" stroke-width="1.5"/>
  
  <!-- Formulas -->
  <text x="300" y="355" text-anchor="middle" fill="#6c7086" font-family="Inter, sans-serif" font-size="11">hₜ = (1-z) · hₜ₋₁ + z · h̃ₜ</text>
  
  <!-- Legend -->
  <rect x="430" y="280" width="150" height="70" rx="6" fill="#313244"/>
  <circle cx="450" cy="300" r="6" fill="#f38ba8"/>
  <text x="465" y="304" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="10">Reset gate</text>
  <circle cx="450" cy="320" r="6" fill="#89b4fa"/>
  <text x="465" y="324" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="10">Update gate</text>
  <circle cx="450" cy="340" r="6" fill="#a6e3a1"/>
  <text x="465" y="344" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="10">Hidden state</text>
</svg>
