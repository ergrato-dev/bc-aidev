<svg viewBox="0 0 600 420" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowT" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L7,3 z" fill="#89b4fa"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="600" height="420" fill="#1e1e2e"/>
  
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="16" font-weight="bold">Transformer Architecture</text>
  
  <!-- ENCODER -->
  <text x="140" y="50" text-anchor="middle" fill="#89b4fa" font-family="Inter, sans-serif" font-size="12" font-weight="bold">ENCODER</text>
  
  <!-- Encoder block background -->
  <rect x="50" y="60" width="180" height="200" rx="8" fill="#313244" stroke="#89b4fa" stroke-width="2"/>
  
  <!-- Encoder: Add & Norm 2 (top) -->
  <rect x="70" y="75" width="140" height="25" rx="4" fill="#45475a" stroke="#cba6f7" stroke-width="1"/>
  <text x="140" y="92" text-anchor="middle" fill="#cba6f7" font-family="Inter, sans-serif" font-size="9">Add and Norm</text>
  
  <!-- Encoder: Feed Forward -->
  <rect x="70" y="110" width="140" height="28" rx="4" fill="#45475a" stroke="#fab387" stroke-width="2"/>
  <text x="140" y="128" text-anchor="middle" fill="#fab387" font-family="Inter, sans-serif" font-size="10">Feed Forward</text>
  
  <!-- Encoder: Add & Norm 1 -->
  <rect x="70" y="148" width="140" height="25" rx="4" fill="#45475a" stroke="#cba6f7" stroke-width="1"/>
  <text x="140" y="165" text-anchor="middle" fill="#cba6f7" font-family="Inter, sans-serif" font-size="9">Add and Norm</text>
  
  <!-- Encoder: Self-Attention -->
  <rect x="70" y="183" width="140" height="28" rx="4" fill="#45475a" stroke="#a6e3a1" stroke-width="2"/>
  <text x="140" y="201" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="10">Multi-Head Attention</text>
  
  <!-- Nx label encoder -->
  <text x="220" y="150" fill="#6c7086" font-family="Inter, sans-serif" font-size="11">xN</text>
  
  <!-- Encoder connections -->
  <line x1="140" y1="100" x2="140" y2="110" stroke="#cba6f7" stroke-width="1.5"/>
  <line x1="140" y1="138" x2="140" y2="148" stroke="#fab387" stroke-width="1.5"/>
  <line x1="140" y1="173" x2="140" y2="183" stroke="#cba6f7" stroke-width="1.5"/>
  
  <!-- Positional Encoding Encoder -->
  <circle cx="140" cy="285" r="12" fill="#45475a" stroke="#f9e2af" stroke-width="2"/>
  <text x="140" y="289" text-anchor="middle" fill="#f9e2af" font-family="Inter, sans-serif" font-size="14">+</text>
  <text x="165" y="289" fill="#f9e2af" font-family="Inter, sans-serif" font-size="8">PE</text>
  
  <!-- Input Embedding Encoder -->
  <rect x="70" y="310" width="140" height="28" rx="4" fill="#45475a" stroke="#89b4fa" stroke-width="1"/>
  <text x="140" y="328" text-anchor="middle" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="9">Input Embedding</text>
  
  <!-- Encoder vertical connections -->
  <line x1="140" y1="211" x2="140" y2="273" stroke="#89b4fa" stroke-width="1.5"/>
  <line x1="140" y1="297" x2="140" y2="310" stroke="#89b4fa" stroke-width="1.5"/>
  
  <!-- Input label -->
  <text x="140" y="360" text-anchor="middle" fill="#6c7086" font-family="Inter, sans-serif" font-size="10">Inputs</text>
  
  <!-- DECODER -->
  <text x="460" y="50" text-anchor="middle" fill="#f38ba8" font-family="Inter, sans-serif" font-size="12" font-weight="bold">DECODER</text>
  
  <!-- Decoder block background -->
  <rect x="370" y="60" width="180" height="260" rx="8" fill="#313244" stroke="#f38ba8" stroke-width="2"/>
  
  <!-- Decoder: Add & Norm 3 (top) -->
  <rect x="390" y="70" width="140" height="22" rx="4" fill="#45475a" stroke="#cba6f7" stroke-width="1"/>
  <text x="460" y="85" text-anchor="middle" fill="#cba6f7" font-family="Inter, sans-serif" font-size="8">Add and Norm</text>
  
  <!-- Decoder: Feed Forward -->
  <rect x="390" y="100" width="140" height="25" rx="4" fill="#45475a" stroke="#fab387" stroke-width="2"/>
  <text x="460" y="117" text-anchor="middle" fill="#fab387" font-family="Inter, sans-serif" font-size="9">Feed Forward</text>
  
  <!-- Decoder: Add & Norm 2 -->
  <rect x="390" y="133" width="140" height="22" rx="4" fill="#45475a" stroke="#cba6f7" stroke-width="1"/>
  <text x="460" y="148" text-anchor="middle" fill="#cba6f7" font-family="Inter, sans-serif" font-size="8">Add and Norm</text>
  
  <!-- Decoder: Cross-Attention -->
  <rect x="390" y="163" width="140" height="30" rx="4" fill="#45475a" stroke="#94e2d5" stroke-width="2"/>
  <text x="460" y="182" text-anchor="middle" fill="#94e2d5" font-family="Inter, sans-serif" font-size="9">Cross-Attention</text>
  
  <!-- Decoder: Add & Norm 1 -->
  <rect x="390" y="201" width="140" height="22" rx="4" fill="#45475a" stroke="#cba6f7" stroke-width="1"/>
  <text x="460" y="216" text-anchor="middle" fill="#cba6f7" font-family="Inter, sans-serif" font-size="8">Add and Norm</text>
  
  <!-- Decoder: Masked Self-Attention -->
  <rect x="390" y="231" width="140" height="30" rx="4" fill="#45475a" stroke="#a6e3a1" stroke-width="2"/>
  <text x="460" y="243" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="8">Masked Multi-Head</text>
  <text x="460" y="254" text-anchor="middle" fill="#a6e3a1" font-family="Inter, sans-serif" font-size="8">Attention</text>
  
  <!-- Nx label decoder -->
  <text x="540" y="175" fill="#6c7086" font-family="Inter, sans-serif" font-size="11">xN</text>
  
  <!-- Decoder internal connections -->
  <line x1="460" y1="92" x2="460" y2="100" stroke="#cba6f7" stroke-width="1.5"/>
  <line x1="460" y1="125" x2="460" y2="133" stroke="#fab387" stroke-width="1.5"/>
  <line x1="460" y1="155" x2="460" y2="163" stroke="#cba6f7" stroke-width="1.5"/>
  <line x1="460" y1="193" x2="460" y2="201" stroke="#94e2d5" stroke-width="1.5"/>
  <line x1="460" y1="223" x2="460" y2="231" stroke="#cba6f7" stroke-width="1.5"/>
  
  <!-- Positional Encoding Decoder -->
  <circle cx="460" cy="340" r="12" fill="#45475a" stroke="#f9e2af" stroke-width="2"/>
  <text x="460" y="344" text-anchor="middle" fill="#f9e2af" font-family="Inter, sans-serif" font-size="14">+</text>
  
  <!-- Output Embedding -->
  <rect x="390" y="365" width="140" height="28" rx="4" fill="#45475a" stroke="#f38ba8" stroke-width="1"/>
  <text x="460" y="383" text-anchor="middle" fill="#cdd6f4" font-family="Inter, sans-serif" font-size="9">Output Embedding</text>
  
  <!-- Decoder vertical connections -->
  <line x1="460" y1="261" x2="460" y2="328" stroke="#f38ba8" stroke-width="1.5"/>
  <line x1="460" y1="352" x2="460" y2="365" stroke="#f38ba8" stroke-width="1.5"/>
  
  <!-- Output label -->
  <text x="460" y="408" text-anchor="middle" fill="#6c7086" font-family="Inter, sans-serif" font-size="10">Outputs (shifted)</text>
  
  <!-- Cross-connection from Encoder to Decoder -->
  <line x1="230" y1="130" x2="300" y2="130" stroke="#89b4fa" stroke-width="2"/>
  <line x1="300" y1="130" x2="300" y2="178" stroke="#89b4fa" stroke-width="2"/>
  <line x1="300" y1="178" x2="390" y2="178" stroke="#89b4fa" stroke-width="2" marker-end="url(#arrowT)"/>
  <text x="305" y="155" fill="#89b4fa" font-family="Inter, sans-serif" font-size="8">K, V</text>
  
  <!-- Linear + Softmax output -->
  <rect x="390" y="20" width="140" height="25" rx="4" fill="#45475a" stroke="#f9e2af" stroke-width="2"/>
  <text x="460" y="37" text-anchor="middle" fill="#f9e2af" font-family="Inter, sans-serif" font-size="9">Linear + Softmax</text>
  
  <!-- Output arrow from decoder to linear -->
  <line x1="460" y1="60" x2="460" y2="45" stroke="#cba6f7" stroke-width="1.5"/>
</svg>